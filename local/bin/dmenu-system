#!/usr/bin/env sh
#=========================================================================
# Author: Gaetan (gaetan@ictpourtous.com) - Twitter: @GaetanICT
# Creation: Sun 22 Aug 2021 12:12:55
# Last modified: Sun 22 Aug 2021 12:13:41
# Version: 1.0
#
# Description: perform various system operations
#=========================================================================

#=======================
# Top menu
#=======================
TOPMENU=$(printf "Display Management\nLogout/Shutdown\nNetwork Management\nMiscellaneous\nCancel" | dmenu -i -p "Choose:")

#=======================
# Logout/shutdown
#=======================
if [ "$TOPMENU" = 'Logout/Shutdown' ]; then
	dmenu-shutdown
fi

#=======================
# Display management
#=======================
if [ "$TOPMENU" = 'Display Management' ]; then
	displayselect
fi

#=======================
# Network management
#=======================
if [ "$TOPMENU" = 'Network Management' ]; then
	OPTS=$(printf "Block Ads\nClear DNS Cache\nCloud Manager\nDHCP Server\nManage Network\nTFTP Server\nWebsites Monitor" | sort | dmenu -i -p "Network Management:")
	case $OPTS in
		"Block Ads") tui 'block-hosts ; bash' ;;
		"Clear DNS Cache") tui 'clear-dns-cache' ;;
		"Cloud Manager") tui 'upcloud-manager' ;;
		"DHCP Server") tui 'dhcp-server' ;;
		"Manage Network") tui 'nmtui' ;;
		"TFTP Server") tui 'tftp-server' ;;
		"Websites Monitor") tui 'websites-monitor ; bash' ;;
		*) exec dmenu-system ;;
	esac
fi

#=======================
# Miscellaneous
#=======================
if [ "$TOPMENU" = 'Miscellaneous' ]; then
	OPTS=$(printf "Bookmarks List\nChange Theme\nCheck Online Streams\nCheck System Queue\nListen To Radio\nMount USB Drive\nOpen URI/URL\nPassword List\nPlay Audio/Video\nRecord Screen/Webcam\nRun\nTake Screenshot\nToggle Compositor\nToggle Cron Jobs\nUnmount USB Drive\nWeb Search\nWindows Manager" | sort | dmenu -i -p "Miscellaneous:")
	case $OPTS in
		"Bookmarks List") dmenu-bookmarks ;;
		"Change Theme") "$SHELL" -c 'tui dmenu-theme' ;;
		"Check Online Streams") dmenu-stream ;;
		"Check System Queue") tui 'tspool ; bash' ;;
		"Listen To Radio") dmenu-radio ;;
		"Mount USB Drive") dmenu-mount ;;
		"Open URI/URL") dmenu-handler ;;
		"Password List") dmenu-pass ;;
		"Play Audio/Video") dmenu-video ;;
		"Record Screen/Webcam") dmenu-record ;;
		"Run") dmenu-run ;;
		"Take Screenshot") "$SCROTBIN" || dmenu-screenshot ;;
		"Toggle Compositor") if pgrep picom > /dev/null 2>&1; then pkill picom > /dev/null 2>&1; else nohup picom -CGb --no-fading-openclose > /dev/null 2>&1 ; fi ;;
		"Toggle Cron Jobs") crontoggle ;;
		"Unmount USB Drive") dmenu-umount ;;
		"Web Search") dmenu-websearch ;;
		"Windows Manager") dmenu-wm ;;
		*) exec dmenu-system ;;
	esac
fi